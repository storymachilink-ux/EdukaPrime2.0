â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š GUIA COMPLETO: SETUP DE SAAS COM SUPABASE + GOOGLE AUTH + WEBHOOK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Este guia documenta TODAS as etapas necessÃ¡rias para criar um SAAS completo
com autenticaÃ§Ã£o Google, webhook de pagamento e painel admin.

Criado com base no projeto EdukaPrime - Todas as correÃ§Ãµes jÃ¡ estÃ£o inclusas.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ VISÃƒO GERAL DO SISTEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TECNOLOGIAS USADAS:
- Frontend: React + TypeScript + Vite + Tailwind CSS
- Backend: Supabase (PostgreSQL + Edge Functions)
- Auth: Supabase Auth + Google OAuth
- Pagamentos: GGCheckout (ou similar) com Webhook
- Deploy: Netlify
- CLI: Supabase CLI (npm)

FUNCIONALIDADES:
âœ… Login com Email/Senha
âœ… Login com Google OAuth
âœ… Sistema de Planos (Gratuito, Essencial, Evoluir, Prime)
âœ… Webhook de pagamento (ativaÃ§Ã£o automÃ¡tica de planos)
âœ… Painel Admin completo
âœ… Sistema de permissÃµes por plano
âœ… Logs de webhook para auditoria

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 1: CONFIGURAÃ‡ÃƒO INICIAL DO PROJETO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ETAPA 1.1: CRIAR PROJETO REACT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Abra o terminal e execute:

   npm create vite@latest meu-saas -- --template react-ts
   cd meu-saas
   npm install

2. Instale as dependÃªncias necessÃ¡rias:

   npm install @supabase/supabase-js react-router-dom lucide-react
   npm install -D tailwindcss postcss autoprefixer
   npx tailwindcss init -p

3. Configure o Tailwind (tailwind.config.js):

   export default {
     content: [
       "./index.html",
       "./src/**/*.{js,ts,jsx,tsx}",
     ],
     theme: {
       extend: {},
     },
     plugins: [],
   }

4. Adicione ao src/index.css:

   @tailwind base;
   @tailwind components;
   @tailwind utilities;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 2: CONFIGURAÃ‡ÃƒO DO SUPABASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ETAPA 2.1: CRIAR PROJETO NO SUPABASE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Acesse: https://app.supabase.com
2. Clique em "New Project"
3. Preencha:
   - Name: Meu SAAS
   - Database Password: (crie uma senha FORTE e GUARDE)
   - Region: South America (SÃ£o Paulo)
4. Clique "Create new project"
5. Aguarde 2-3 minutos para provisionar

ETAPA 2.2: COPIAR CREDENCIAIS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. No Supabase Dashboard â†’ Settings â†’ API
2. Copie:
   - Project URL (ex: https://abcdefgh.supabase.co)
   - anon public key (string grande comeÃ§ando com eyJ...)
3. Copie tambÃ©m o Project Reference ID (em Settings â†’ General)

GUARDE ESSAS 3 INFORMAÃ‡Ã•ES - VOCÃŠ VAI USAR VÃRIAS VEZES!

ETAPA 2.3: CRIAR ARQUIVO .env
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Na raiz do projeto, crie o arquivo .env
2. Adicione (substitua pelos seus valores):

VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=sua-anon-key-aqui

3. Adicione .env ao .gitignore (se ainda nÃ£o estiver):

.env
.env.local

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 3: CRIAR BANCO DE DADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ IMPORTANTE: Execute os SQLs ANTES de criar o cÃ³digo que usa o banco!

ETAPA 3.1: CRIAR TABELA DE USUÃRIOS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Supabase Dashboard â†’ SQL Editor â†’ New Query
2. Cole e execute:

-- Tabela de usuÃ¡rios (perfil estendido)
CREATE TABLE users (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  email TEXT UNIQUE NOT NULL,
  nome TEXT,
  cpf TEXT,
  telefone TEXT,
  plano_ativo INTEGER DEFAULT 0,
  data_expiracao_plano TIMESTAMP WITH TIME ZONE,
  is_admin BOOLEAN DEFAULT false,
  acesso_atividades BOOLEAN,
  acesso_videos BOOLEAN,
  acesso_bonus BOOLEAN,
  acesso_suporte_vip BOOLEAN,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- RLS
ALTER TABLE users ENABLE ROW LEVEL SECURITY;

-- PolÃ­ticas
CREATE POLICY "UsuÃ¡rios podem ver prÃ³prio perfil"
  ON users FOR SELECT
  USING (auth.uid() = id);

CREATE POLICY "UsuÃ¡rios podem atualizar prÃ³prio perfil"
  ON users FOR UPDATE
  USING (auth.uid() = id);

CREATE POLICY "Admins podem ver tudo"
  ON users FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM users
      WHERE users.id = auth.uid()
      AND users.is_admin = true
    )
  );

-- Ãndices
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_plano ON users(plano_ativo);

ETAPA 3.2: CRIAR TABELA DE WEBHOOK LOGS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Supabase Dashboard â†’ SQL Editor â†’ New Query
2. Cole e execute:

-- Tabela de logs de webhooks
CREATE TABLE webhook_logs (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

  event_type TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'pending',
  message TEXT,

  customer_email TEXT NOT NULL,
  customer_name TEXT,
  customer_document TEXT,
  customer_phone TEXT,

  product_id TEXT NOT NULL,
  plan_activated INTEGER,
  plan_name TEXT,
  expiration_date TIMESTAMP WITH TIME ZONE,

  payment_id TEXT,
  payment_method TEXT NOT NULL,
  amount NUMERIC NOT NULL,

  raw_payload JSONB NOT NULL
);

-- Ãndices
CREATE INDEX idx_webhook_logs_email ON webhook_logs(customer_email);
CREATE INDEX idx_webhook_logs_created ON webhook_logs(created_at DESC);
CREATE INDEX idx_webhook_logs_status ON webhook_logs(status);
CREATE INDEX idx_webhook_logs_event ON webhook_logs(event_type);
CREATE INDEX idx_webhook_logs_product ON webhook_logs(product_id);

-- RLS
ALTER TABLE webhook_logs ENABLE ROW LEVEL SECURITY;

-- Apenas admins podem ver
CREATE POLICY "Apenas admins podem ver logs de webhooks"
  ON webhook_logs FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM users
      WHERE users.id = auth.uid()
      AND users.is_admin = true
    )
  );

-- NinguÃ©m pode inserir/editar/deletar manualmente
CREATE POLICY "NinguÃ©m pode inserir manualmente"
  ON webhook_logs FOR INSERT
  WITH CHECK (false);

CREATE POLICY "NinguÃ©m pode atualizar logs"
  ON webhook_logs FOR UPDATE
  USING (false);

CREATE POLICY "NinguÃ©m pode deletar logs"
  ON webhook_logs FOR DELETE
  USING (false);

ETAPA 3.3: VERIFICAR SE FUNCIONOU
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Execute para testar:

SELECT * FROM users LIMIT 1;
SELECT * FROM webhook_logs LIMIT 1;

Se nÃ£o der erro = Tabelas criadas com sucesso! âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 4: CONFIGURAR GOOGLE OAUTH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ IMPORTANTE: FaÃ§a TUDO nesta ordem para evitar erros!

ETAPA 4.1: CRIAR PROJETO NO GOOGLE CLOUD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Acesse: https://console.cloud.google.com
2. FaÃ§a login com sua conta Google
3. Clique em "Select a project" (topo) â†’ "NEW PROJECT"
4. Nome do projeto: Meu SAAS
5. Clique "CREATE"
6. Aguarde 10-20 segundos

ETAPA 4.2: CONFIGURAR OAUTH CONSENT SCREEN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Menu lateral â†’ "APIs & Services" â†’ "OAuth consent screen"
2. Escolha "External" â†’ "CREATE"
3. Preencha:
   - App name: Meu SAAS
   - User support email: seu-email@gmail.com
   - Developer contact: seu-email@gmail.com
4. "SAVE AND CONTINUE"
5. Em "Scopes": "SAVE AND CONTINUE" (nÃ£o precisa adicionar nada)
6. Em "Test users": "SAVE AND CONTINUE"
7. "BACK TO DASHBOARD"

ETAPA 4.3: CRIAR OAUTH CLIENT ID
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Menu lateral â†’ "APIs & Services" â†’ "Credentials"
2. "+ CREATE CREDENTIALS" â†’ "OAuth client ID"
3. Application type: "Web application"
4. Name: "Meu SAAS Web Client"

5. âš ï¸ ATENÃ‡ÃƒO: Authorized JavaScript origins:
   Adicione AMBAS as URLs (clique "+ ADD URI" para cada uma):

   https://seu-dominio.com.br
   https://seu-projeto-ref.supabase.co

   (Substitua pelo SEU domÃ­nio e SEU project ref do Supabase!)

6. âš ï¸ ATENÃ‡ÃƒO: Authorized redirect URIs:
   Adicione APENAS esta URL:

   https://seu-projeto-ref.supabase.co/auth/v1/callback

   (Substitua pelo SEU project ref do Supabase!)

7. Clique "CREATE"

8. âš ï¸ COPIE E GUARDE:
   - Client ID (algo como: 123456-abcdef.apps.googleusercontent.com)
   - Client Secret (algo como: GOCSPX-abc123...)

ETAPA 4.4: CONFIGURAR NO SUPABASE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Supabase Dashboard â†’ Authentication â†’ Providers
2. Procure "Google" e clique para expandir
3. Habilite o toggle "Enable Sign in with Google"
4. Cole:
   - Client ID (copiado na etapa anterior)
   - Client Secret (copiado na etapa anterior)
5. Clique "Save"

ETAPA 4.5: CONFIGURAR SITE URL NO SUPABASE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ SUPER IMPORTANTE: SEM BARRA NO FINAL!

1. Supabase Dashboard â†’ Authentication â†’ URL Configuration
2. Configure:

   Site URL: https://seu-dominio.com.br
   (âš ï¸ SEM barra "/" no final!)

   Redirect URLs: https://seu-dominio.com.br/**
   (âš ï¸ Apenas essa linha com **)

3. Clique "Save"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 5: CRIAR CÃ“DIGO DO FRONTEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ETAPA 5.1: CRIAR CLIENTE SUPABASE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Crie: src/lib/supabase.ts

import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY

if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Missing Supabase environment variables')
}

export const supabase = createClient(supabaseUrl, supabaseAnonKey)

ETAPA 5.2: CRIAR AUTH CONTEXT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Crie: src/contexts/AuthContext.tsx

(CÃ³digo completo estÃ¡ no projeto - use o arquivo AuthContext.tsx como referÃªncia)

PONTOS IMPORTANTES:
- signInWithGoogle deve usar: redirectTo: window.location.origin (SEM /dashboard)
- createUserProfile deve buscar/criar perfil automaticamente
- onAuthStateChange deve processar SIGNED_IN corretamente

ETAPA 5.3: CRIAR PÃGINA DE LOGIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Crie: src/pages/Login.tsx

PONTOS IMPORTANTES:
- Adicionar useEffect para redirecionar se jÃ¡ estiver logado
- Importar { user } do useAuth()
- BotÃ£o Google deve ter design bonito com logo do Google

ETAPA 5.4: ATUALIZAR MAIN.TSX PARA PROCESSAR OAUTH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ CRÃTICO: Este cÃ³digo processa o callback OAuth antes do React renderizar!

Edite: src/main.tsx

import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import { AuthProvider } from './contexts/AuthContext';
import { supabase } from './lib/supabase';
import App from './App';
import './index.css';

// Processar callback OAuth ANTES de renderizar o app
const handleOAuthCallback = async () => {
  console.log('ğŸŒ URL atual:', window.location.href);
  console.log('ğŸŒ Hash:', window.location.hash);

  const hashParams = new URLSearchParams(window.location.hash.substring(1));
  const accessToken = hashParams.get('access_token');

  if (accessToken) {
    console.log('ğŸ”‘ Token OAuth detectado, processando...');
    await new Promise(resolve => setTimeout(resolve, 100));
  } else {
    console.log('âš ï¸ Nenhum token OAuth no hash');
  }
};

handleOAuthCallback().then(() => {
  createRoot(document.getElementById('root')!).render(
    <StrictMode>
      <BrowserRouter>
        <AuthProvider>
          <App />
        </AuthProvider>
      </BrowserRouter>
    </StrictMode>
  );
});

ETAPA 5.5: ATUALIZAR APP.TSX
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

No componente LandingPage, adicione redirect para usuÃ¡rios logados:

function LandingPage() {
  const navigate = useNavigate();
  const { user } = useAuth();

  // Redirecionar para dashboard se usuÃ¡rio jÃ¡ estiver logado
  React.useEffect(() => {
    if (user) {
      console.log('âœ… UsuÃ¡rio logado detectado, redirecionando...');
      navigate('/dashboard');
    }
  }, [user, navigate]);

  // ... resto do cÃ³digo
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 6: CONFIGURAR WEBHOOK DE PAGAMENTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ETAPA 6.1: INSTALAR SUPABASE CLI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. No terminal do projeto, execute:

   npm install supabase --save-dev

2. Inicialize o projeto:

   npx supabase init

3. FaÃ§a login:

   npx supabase login

   (Vai abrir o navegador para autenticar)

4. Linkar ao projeto:

   npx supabase link --project-ref SEU_PROJECT_REF

   (Substitua SEU_PROJECT_REF pelo ID do Supabase copiado na Parte 2)

   Vai pedir a senha do banco - digite a que vocÃª criou.

ETAPA 6.2: ATUALIZAR CONFIG.TOML
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ IMPORTANTE: Configure ANTES de fazer deploy!

Edite: supabase/config.toml

Adicione estas seÃ§Ãµes (ajuste conforme necessÃ¡rio):

[auth]
enabled = true
site_url = "https://seu-dominio.com.br"
additional_redirect_urls = ["http://localhost:5173", "https://seu-dominio.com.br/**"]
jwt_expiry = 3600

[auth.email]
enable_signup = true
double_confirm_changes = true
enable_confirmations = false

[auth.external.google]
enabled = true
client_id = "seu-client-id.apps.googleusercontent.com"
secret = "GOCSPX-seu-client-secret"

[functions.checkout-webhook]
verify_jwt = false

âš ï¸ ATENÃ‡ÃƒO: verify_jwt = false Ã© NECESSÃRIO para webhooks pÃºblicos!

ETAPA 6.3: CRIAR EDGE FUNCTION DO WEBHOOK
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Crie: supabase/functions/checkout-webhook/index.ts

(CÃ³digo completo estÃ¡ no projeto - use o arquivo como referÃªncia)

PONTOS IMPORTANTES:
- Mapear IDs de produtos do checkout para nÃºmeros de planos
- PIX = 30 dias, CartÃ£o = 90 dias
- Criar usuÃ¡rio automaticamente se nÃ£o existir
- Registrar tudo em webhook_logs
- Retornar status 200 sempre (mesmo para eventos ignorados)

ETAPA 6.4: FAZER DEPLOY DA EDGE FUNCTION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Execute:

   npx supabase functions deploy checkout-webhook

2. âš ï¸ COPIE A URL que aparecer no final:

   https://seu-projeto-ref.supabase.co/functions/v1/checkout-webhook

   GUARDE ESSA URL - vocÃª vai usar no prÃ³ximo passo!

3. Teste se estÃ¡ funcionando:

   https://seu-projeto-ref.supabase.co/functions/v1/checkout-webhook

   Deve retornar erro 405 (Method not allowed) = estÃ¡ funcionando!

ETAPA 6.5: CONFIGURAR WEBHOOK NO GGCHECKOUT (OU SEU GATEWAY)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Acesse o painel do seu gateway de pagamento
2. VÃ¡ em Webhooks ou IntegraÃ§Ãµes
3. Clique em Adicionar Webhook
4. Configure:

   URL: https://seu-projeto-ref.supabase.co/functions/v1/checkout-webhook

   Eventos:
   âœ… pix.paid
   âœ… card.paid
   â¬œ Desmarque todos os outros

5. Salve

6. Teste enviando um webhook de teste (se disponÃ­vel)

ETAPA 6.6: VERIFICAR SE FUNCIONOU
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Supabase Dashboard â†’ SQL Editor
2. Execute:

   SELECT * FROM webhook_logs ORDER BY created_at DESC LIMIT 10;

3. Deve aparecer os webhooks recebidos!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 7: DEPLOY NO NETLIFY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ETAPA 7.1: PREPARAR PROJETO PARA BUILD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Confirme que o .env estÃ¡ correto (Parte 2, Etapa 2.3)
2. Delete a pasta dist (se existir)
3. Execute:

   npm run build

4. Verifique se a pasta dist foi criada

ETAPA 7.2: CRIAR CONTA E SITE NO NETLIFY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Acesse: https://app.netlify.com
2. FaÃ§a login ou crie conta
3. Arraste a pasta dist para o Netlify
4. Aguarde o deploy

ETAPA 7.3: CONFIGURAR VARIÃVEIS DE AMBIENTE NO NETLIFY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ CRÃTICO: SEM ISSO O SITE NÃƒO FUNCIONA!

1. No Netlify, clique no seu site
2. Site configuration â†’ Environment variables
3. Clique "Add a variable"
4. Adicione 2 variÃ¡veis:

   Key: VITE_SUPABASE_URL
   Value: https://seu-projeto-ref.supabase.co

   Key: VITE_SUPABASE_ANON_KEY
   Value: sua-anon-key-completa

5. Clique "Save"

ETAPA 7.4: CONFIGURAR DOMÃNIO PERSONALIZADO (OPCIONAL)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. No Netlify â†’ Domain management
2. Add custom domain
3. Digite seu domÃ­nio (ex: meu-saas.com.br)
4. Siga as instruÃ§Ãµes para configurar DNS

ETAPA 7.5: REBUILD COM VARIÃVEIS DE AMBIENTE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Depois de configurar as variÃ¡veis:

OPÃ‡ÃƒO A - Via Netlify (se conectou via Git):
1. Deploys â†’ Trigger deploy â†’ Clear cache and deploy site

OPÃ‡ÃƒO B - Build local (se usa drag & drop):
1. Delete pasta dist
2. npm run build
3. Arraste nova pasta dist para o Netlify

ETAPA 7.6: ATUALIZAR CONFIGURAÃ‡Ã•ES DO GOOGLE OAUTH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ IMPORTANTE: Depois do deploy, atualize as URLs!

1. Google Cloud Console â†’ APIs & Services â†’ Credentials
2. Clique no seu OAuth Client ID
3. Em "Authorized JavaScript origins":
   - Adicione: https://seu-dominio-netlify.netlify.app
   - OU: https://seu-dominio-personalizado.com.br

4. Clique "Save"
5. Aguarde 5-10 minutos para propagar

ETAPA 7.7: ATUALIZAR SITE URL NO SUPABASE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Supabase Dashboard â†’ Authentication â†’ URL Configuration
2. Atualize:

   Site URL: https://seu-dominio-final.com.br
   (SEM barra no final!)

   Redirect URLs: https://seu-dominio-final.com.br/**

3. Clique "Save"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PARTE 8: TESTAR TUDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ETAPA 8.1: TESTAR LOGIN COM EMAIL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Acesse seu site
2. Clique em "Criar Conta"
3. Preencha email, nome e senha
4. Clique "Criar Conta"
5. Deve redirecionar para /dashboard âœ…

ETAPA 8.2: TESTAR LOGIN COM GOOGLE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ Se nÃ£o funcionar de primeira, aguarde 10-15 minutos (propagaÃ§Ã£o Google)

1. Acesse seu site
2. Clique em "Continuar com Google"
3. FaÃ§a login com sua conta Google
4. Console (F12) deve mostrar:

   ğŸ”µ Iniciando Google OAuth com redirect: https://...
   ğŸ”‘ Token OAuth detectado, processando...
   ğŸ”„ Auth state changed: SIGNED_IN
   âœ… UsuÃ¡rio logado detectado, redirecionando...

5. Deve redirecionar para /dashboard âœ…

ETAPA 8.3: TESTAR WEBHOOK
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. FaÃ§a uma compra de teste no seu gateway
2. Supabase â†’ SQL Editor:

   SELECT * FROM webhook_logs ORDER BY created_at DESC LIMIT 5;

3. Deve aparecer o registro do webhook âœ…

4. Verifique se o usuÃ¡rio foi criado/atualizado:

   SELECT email, plano_ativo, data_expiracao_plano
   FROM users
   WHERE email = 'email-do-teste@exemplo.com';

5. Plano deve estar ativado âœ…

ETAPA 8.4: TESTAR PAINEL ADMIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Torne seu usuÃ¡rio admin no SQL Editor:

   UPDATE users SET is_admin = true WHERE email = 'seu-email@exemplo.com';

2. Acesse: /admin
3. Deve ver o painel admin âœ…

4. Acesse: /admin/webhooks
5. Deve ver os logs dos webhooks âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ TROUBLESHOOTING: PROBLEMAS COMUNS E SOLUÃ‡Ã•ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA: Google Login retorna para / em vez de /dashboard
SOLUÃ‡ÃƒO:
- Verifique Site URL no Supabase (SEM barra no final!)
- redirectTo no cÃ³digo deve ser: window.location.origin (sem /dashboard)
- Aguarde 10-15 minutos apÃ³s mudanÃ§as no Google Cloud

PROBLEMA: "Invalid JWT" no webhook
SOLUÃ‡ÃƒO:
- Adicione no config.toml: [functions.checkout-webhook] verify_jwt = false
- FaÃ§a deploy novamente: npx supabase functions deploy checkout-webhook

PROBLEMA: Build nÃ£o tem variÃ¡veis de ambiente
SOLUÃ‡ÃƒO:
- Verifique .env na raiz do projeto
- Se deploy via Netlify drag&drop: configure variÃ¡veis no Netlify primeiro
- Delete pasta dist, faÃ§a npm run build novamente

PROBLEMA: "redirect_uri_mismatch" no Google
SOLUÃ‡ÃƒO:
- Verifique Authorized redirect URIs no Google Cloud
- Deve ter: https://seu-projeto-ref.supabase.co/auth/v1/callback
- Aguarde 10 minutos apÃ³s mudanÃ§as

PROBLEMA: Webhook nÃ£o estÃ¡ sendo chamado
SOLUÃ‡ÃƒO:
- Verifique URL do webhook no gateway de pagamento
- Teste manualmente: curl -X POST sua-url-do-webhook
- Verifique logs: npx supabase functions logs checkout-webhook

PROBLEMA: "Missing Supabase environment variables"
SOLUÃ‡ÃƒO:
- .env estÃ¡ na raiz do projeto?
- VariÃ¡veis comeÃ§am com VITE_?
- Refez o build depois de criar .env?

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SUPABASE:
â˜ Projeto criado
â˜ Credenciais copiadas (URL, anon key, project ref)
â˜ Tabela users criada
â˜ Tabela webhook_logs criada
â˜ RLS configurado corretamente
â˜ Google Provider ativado em Authentication
â˜ Site URL configurada (SEM barra final)
â˜ Redirect URLs configuradas (**/*.*)

GOOGLE CLOUD:
â˜ Projeto criado
â˜ OAuth Consent Screen configurado
â˜ OAuth Client ID criado
â˜ Authorized JavaScript origins com 2 URLs (site + supabase)
â˜ Authorized redirect URIs com callback do Supabase
â˜ Client ID e Secret copiados

CÃ“DIGO:
â˜ .env criado na raiz
â˜ VariÃ¡veis VITE_SUPABASE_URL e VITE_SUPABASE_ANON_KEY
â˜ src/lib/supabase.ts criado
â˜ AuthContext.tsx completo
â˜ main.tsx processando OAuth callback
â˜ App.tsx com redirect em LandingPage
â˜ Login.tsx com botÃ£o Google e redirect

WEBHOOK:
â˜ Supabase CLI instalado (npm)
â˜ npx supabase init executado
â˜ npx supabase login feito
â˜ npx supabase link executado
â˜ config.toml com verify_jwt = false
â˜ Edge Function criada em supabase/functions/
â˜ npx supabase functions deploy executado
â˜ URL do webhook copiada
â˜ Webhook configurado no gateway de pagamento

NETLIFY:
â˜ Conta criada
â˜ Build local feito (npm run build)
â˜ Pasta dist enviada
â˜ VariÃ¡veis de ambiente configuradas no Netlify
â˜ DomÃ­nio configurado (se aplicÃ¡vel)
â˜ Google OAuth atualizado com URL final
â˜ Supabase Site URL atualizada

TESTES:
â˜ Login com email funciona
â˜ Login com Google funciona
â˜ Redirect para dashboard funciona
â˜ Webhook recebe pagamentos
â˜ UsuÃ¡rios sÃ£o criados automaticamente
â˜ Planos sÃ£o ativados corretamente
â˜ Painel admin acessÃ­vel
â˜ Logs de webhook aparecem

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š ARQUIVOS DE REFERÃŠNCIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Todos os arquivos completos estÃ£o no projeto EdukaPrime:

- src/lib/supabase.ts
- src/contexts/AuthContext.tsx
- src/pages/Login.tsx
- src/pages/admin/WebhookLogs.tsx
- src/main.tsx
- src/App.tsx
- supabase/functions/checkout-webhook/index.ts
- supabase/config.toml
- sql/create_webhook_logs.sql
- sql/webhook_product_mapping.sql

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ CONCEITOS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ORDEM DE EXECUÃ‡ÃƒO OAUTH:
1. UsuÃ¡rio clica "Continuar com Google"
2. CÃ³digo chama supabase.auth.signInWithOAuth()
3. Navegador redireciona para Google
4. UsuÃ¡rio faz login no Google
5. Google redireciona para: https://projeto.supabase.co/auth/v1/callback
6. Supabase processa e redireciona para: https://seu-site.com/#access_token=...
7. main.tsx detecta token no hash
8. AuthContext processa token via onAuthStateChange
9. App.tsx ou Login.tsx detecta user e redireciona para /dashboard

POR QUE verify_jwt = false?
- Edge Functions por padrÃ£o exigem autenticaÃ§Ã£o JWT
- Webhooks externos (como gateways de pagamento) nÃ£o tÃªm JWT
- verify_jwt = false permite chamadas pÃºblicas na funÃ§Ã£o
- Ã‰ seguro porque a funÃ§Ã£o valida os dados recebidos

POR QUE SEM BARRA NO SITE URL?
- Site URL com barra: https://site.com/
- redirectTo: /dashboard
- Resultado: https://site.com//dashboard (quebrado!)
- Site URL sem barra: https://site.com
- redirectTo: /dashboard
- Resultado: https://site.com/dashboard (correto!)

VARIÃVEIS DE AMBIENTE:
- Build local: LÃª do arquivo .env na raiz
- Netlify com Git: LÃª das variÃ¡veis configuradas no Netlify
- Netlify com drag&drop: Precisa buildar LOCAL com .env correto

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FIM DO GUIA - BOA SORTE COM SEU SAAS! ğŸš€

Criado com base no projeto EdukaPrime
Todas as armadilhas e erros comuns jÃ¡ foram documentados e corrigidos.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
